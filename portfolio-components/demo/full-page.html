<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BRUTALIST DEV PORTFOLIO - Full Demo</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700;900&family=JetBrains+Mono:wght@400;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Shared Styles - Load First -->
    <link rel="stylesheet" href="../shared/styles/variables.css" />
    <link rel="stylesheet" href="../shared/styles/animations.css" />
    <link rel="stylesheet" href="../shared/styles/utilities.css" />

    <!-- Component Styles - Load in Order -->
    <link rel="stylesheet" href="../navigation/styles.css" />
    <link rel="stylesheet" href="../hero/styles.css" />
    <link rel="stylesheet" href="../trust/styles.css" />
    <link rel="stylesheet" href="../value-proposition/styles.css" />
    <link rel="stylesheet" href="../project-showcase/styles.css" />
    <link rel="stylesheet" href="../tech-capabilities/styles.css" />
    <link rel="stylesheet" href="../results/styles.css" />
    <link rel="stylesheet" href="../process/styles.css" />
    <link rel="stylesheet" href="../social-proof/styles.css" />
    <link rel="stylesheet" href="../contact-hub/styles.css" />
    <link rel="stylesheet" href="../footer/styles.css" />

    <style>
      /* Full page specific styles */
      body {
        margin: 0;
        padding: 0;
        background: var(--primary-black);
        color: var(--primary-white);
        font-family: var(--font-mono);
        overflow-x: hidden;
      }

      /* Ensure smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Component spacing */
      .component-section {
        position: relative;
        width: 100%;
      }

      /* Navigation should be fixed */
      .nav-container {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: var(--z-navigation, 1000);
      }

      /* Adjust main content to account for fixed navigation */
      .main-content {
        margin-top: var(--nav-height, 80px);
      }

      /* Ensure sections flow properly */
      .component-section:not(:last-child) {
        margin-bottom: 0;
      }
    </style>
  </head>

  <body>
    <!-- Navigation Component -->
    <div class="component-section" id="navigation-component">
      <!-- Navigation content will be loaded here -->
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Hero Component -->
      <div class="component-section" id="hero-component">
        <!-- Hero content will be loaded here -->
      </div>

      <!-- Trust Component -->
      <div class="component-section" id="trust-component">
        <!-- Trust content will be loaded here -->
      </div>

      <!-- Value Proposition Component -->
      <div class="component-section" id="value-proposition-component">
        <!-- Value proposition content will be loaded here -->
      </div>

      <!-- Project Showcase Component -->
      <div class="component-section" id="project-showcase-component">
        <!-- Project showcase content will be loaded here -->
      </div>

      <!-- Tech Capabilities Component -->
      <div class="component-section" id="tech-capabilities-component">
        <!-- Tech capabilities content will be loaded here -->
      </div>

      <!-- Results Component -->
      <div class="component-section" id="results-component">
        <!-- Results content will be loaded here -->
      </div>

      <!-- Process Component -->
      <div class="component-section" id="process-component">
        <!-- Process content will be loaded here -->
      </div>

      <!-- Social Proof Component -->
      <div class="component-section" id="social-proof-component">
        <!-- Social proof content will be loaded here -->
      </div>

      <!-- Contact Hub Component -->
      <div class="component-section" id="contact-hub-component">
        <!-- Contact hub content will be loaded here -->
      </div>

      <!-- Footer Component -->
      <div class="component-section" id="footer-component">
        <!-- Footer content will be loaded here -->
      </div>
    </div>

    <!-- Shared JavaScript Utilities - Load First -->
    <script src="../shared/scripts/utilities.js"></script>

    <!-- Component Scripts - Load in Order -->
    <script src="../navigation/script.js"></script>
    <script src="../hero/script.js"></script>
    <script src="../trust/script.js"></script>
    <script src="../value-proposition/script.js"></script>
    <script src="../project-showcase/script.js"></script>
    <script src="../tech-capabilities/script.js"></script>
    <script src="../results/script.js"></script>
    <script src="../process/script.js"></script>
    <script src="../social-proof/script.js"></script>
    <script src="../contact-hub/script.js"></script>
    <script src="../footer/script.js"></script>

    <!-- Integration Test Script (for development/testing) -->
    <script src="integration-test.js"></script>

    <!-- Full Page Integration Script -->
    <script>
      class FullPageIntegration {
        constructor() {
          this.components = [
            "navigation",
            "hero",
            "trust",
            "value-proposition",
            "project-showcase",
            "tech-capabilities",
            "results",
            "process",
            "social-proof",
            "contact-hub",
            "footer",
          ];
          this.loadedComponents = new Set();
          this.init();
        }

        async init() {
          try {
            await this.loadComponents();
            this.initializeComponents();
            this.setupGlobalInteractions();
            console.log("Full page integration complete");
          } catch (error) {
            console.error("Error initializing full page:", error);
          }
        }

        async loadComponents() {
          const loadPromises = this.components.map(async (componentName) => {
            try {
              const response = await fetch(`../${componentName}/index.html`);
              if (!response.ok) {
                throw new Error(
                  `Failed to load ${componentName}: ${response.status}`
                );
              }

              const html = await response.text();
              const parser = new DOMParser();
              const doc = parser.parseFromString(html, "text/html");

              // Extract the main content (skip head and body tags)
              const content =
                componentName === "navigation"
                  ? doc.querySelector("nav") || doc.body.firstElementChild
                  : doc.querySelector("section") || doc.body.firstElementChild;

              if (content) {
                const targetContainer = document.getElementById(
                  `${componentName}-component`
                );
                if (targetContainer) {
                  targetContainer.innerHTML = "";
                  targetContainer.appendChild(content.cloneNode(true));
                  this.loadedComponents.add(componentName);
                  console.log(`Loaded ${componentName} component`);
                }
              }
            } catch (error) {
              console.error(`Error loading ${componentName} component:`, error);
            }
          });

          await Promise.all(loadPromises);
          console.log(
            `Loaded ${this.loadedComponents.size}/${this.components.length} components`
          );
        }

        initializeComponents() {
          // Initialize each component's JavaScript if available
          this.components.forEach((componentName) => {
            if (this.loadedComponents.has(componentName)) {
              try {
                // Try to initialize component-specific classes
                const className = this.getComponentClassName(componentName);
                if (window[className]) {
                  new window[className]();
                  console.log(`Initialized ${className}`);
                }
              } catch (error) {
                console.warn(`Could not initialize ${componentName}:`, error);
              }
            }
          });
        }

        getComponentClassName(componentName) {
          // Convert kebab-case to PascalCase and add Brutalist prefix
          const pascalCase = componentName
            .split("-")
            .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
            .join("");
          return `Brutalist${pascalCase}`;
        }

        setupGlobalInteractions() {
          // Setup smooth scrolling for navigation
          this.setupSmoothScrolling();

          // Setup intersection observer for section highlighting
          this.setupSectionObserver();

          // Setup global keyboard shortcuts
          this.setupKeyboardShortcuts();
        }

        setupSmoothScrolling() {
          document.addEventListener("click", (e) => {
            const link = e.target.closest("[data-section]");
            if (link) {
              e.preventDefault();
              const sectionName = link.getAttribute("data-section");
              const targetSection = this.findSectionByName(sectionName);

              if (targetSection) {
                targetSection.scrollIntoView({
                  behavior: "smooth",
                  block: "start",
                });
              }
            }
          });
        }

        findSectionByName(sectionName) {
          const sectionMap = {
            home: "hero-component",
            projects: "project-showcase-component",
            capabilities: "tech-capabilities-component",
            github: "trust-component",
            results: "results-component",
            contact: "contact-hub-component",
          };

          const componentId =
            sectionMap[sectionName] || `${sectionName}-component`;
          return document.getElementById(componentId);
        }

        setupSectionObserver() {
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  const sectionId = entry.target.id;
                  this.highlightActiveSection(sectionId);
                }
              });
            },
            {
              threshold: 0.3,
              rootMargin: "-80px 0px -50% 0px",
            }
          );

          this.components.forEach((componentName) => {
            const section = document.getElementById(
              `${componentName}-component`
            );
            if (section) {
              observer.observe(section);
            }
          });
        }

        highlightActiveSection(sectionId) {
          // Remove active class from all nav items
          document.querySelectorAll(".nav-item").forEach((item) => {
            item.classList.remove("active");
          });

          // Add active class to corresponding nav item
          const sectionName = sectionId.replace("-component", "");
          const navItem = document.querySelector(
            `[data-section="${sectionName}"]`
          );
          if (navItem) {
            navItem.classList.add("active");
          }
        }

        setupKeyboardShortcuts() {
          document.addEventListener("keydown", (e) => {
            // Only handle shortcuts when not in input fields
            if (
              e.target.tagName === "INPUT" ||
              e.target.tagName === "TEXTAREA"
            ) {
              return;
            }

            switch (e.key) {
              case "1":
                this.scrollToSection("hero-component");
                break;
              case "2":
                this.scrollToSection("project-showcase-component");
                break;
              case "3":
                this.scrollToSection("tech-capabilities-component");
                break;
              case "4":
                this.scrollToSection("results-component");
                break;
              case "5":
                this.scrollToSection("contact-hub-component");
                break;
              case "Escape":
                // Close any open modals or menus
                this.closeAllModals();
                break;
            }
          });
        }

        scrollToSection(sectionId) {
          const section = document.getElementById(sectionId);
          if (section) {
            section.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        }

        closeAllModals() {
          // Close mobile menu if open
          const mobileMenu = document.getElementById("mobileMenu");
          if (mobileMenu && mobileMenu.classList.contains("active")) {
            mobileMenu.classList.remove("active");
          }

          // Close any other modals
          document
            .querySelectorAll(".modal.active, .overlay.active")
            .forEach((modal) => {
              modal.classList.remove("active");
            });
        }
      }

      // Initialize full page integration when DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        new FullPageIntegration();
      });

      // Handle loading states
      window.addEventListener("load", () => {
        document.body.classList.add("loaded");
      });

      // Error handling for missing components
      window.addEventListener("error", (e) => {
        console.error("Global error:", e.error);
      });
    </script>
  </body>
</html>
